<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title>腾讯地图热力图插件</title>
    <style>
        body, html {
            width: 100%;
            height: 100%;
        }

        * {
            margin: 0px;
            padding: 0px;
        }

        body, button, input, select, textarea {
            font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
        }
    </style>
    <script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
    <script src="http://open.map.qq.com/apifiles/plugins/heatmap/heatmap.min.js"></script>
</head>
<body>

<div class="heatmap" style="width:100%;height:100%" id="map-canvas">

</div>
<script type="application/javascript" src="src/dt2.js"></script>
<script>

    window.onload = function () {
        map = new qq.maps.Map(document.getElementById("map-canvas"), {
            zoom: 14,
            center: new qq.maps.LatLng(39.921984, 116.418261)
        });

        //地图异步加载，在idle或者tilesloaded后初始化
        qq.maps.event.addListenerOnce(map, "idle", function () {
            if (QQMapPlugin.isSupportCanvas) {
                heatmap = new QQMapPlugin.HeatmapOverlay(map,
                    {
                        //点半径，设置为1即可
                        "radius": 0.3,
                        //热力图最大透明度
                        "maxOpacity": 0.3,
                        //是否在每一屏都开启重新计算，如果为true则每一屏都会有一个红点
                        "useLocalExtrema": true,
                        //设置大小字段
                        "valueField": 'count'
                    }
                );
                //test data form baidu.com
                testData = {
                    max: 9000,
                    data: []
                       
                };
                testData.data = latLng;
                console.log(testData.data.length)

                //绘制热力图
                heatmap.setData(testData);
            } else {
                alert("您的浏览器不支持canvas，无法绘制热力图！！")
            }

        });


    };
</script>
</body>
</html>